(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{1728:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>v});var r=t(5155);t(5663);var s=t(4408),a=t(2718);function n(e){let{label:l,icon:t}=e,{selection:s,setSelection:n}=(0,a.C)(),o=s===l;return(0,r.jsxs)("div",{onClick:function(){n(l),window.dispatchEvent(new Event("hide-sidebar"))},className:"w-full flex items-center px-6 py-2 cursor-pointer transition-colors duration-200 \n            ".concat(o?"bg-blue-200 text-white":"hover:bg-gray-100 text-gray-800"),children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-lg",children:t}),(0,r.jsx)("div",{className:"pl-2",children:l})]})}function o(e){let{label:l}=e;return(0,r.jsx)("div",{className:"w-full border-0 h-[3rem] flex items-center py-[1rem] pl-[1rem] pr-[1rem] relative",children:(0,r.jsx)("label",{className:"w-full px-0 border-b-1 text-xl border-gray-500",children:l})})}function i(e){let{label:l,buttons:t}=e;return(0,r.jsxs)("div",{className:"w-full text-l pt-[1rem] md:pt-0",children:[(0,r.jsx)(o,{label:l}),t.map((e,l)=>(0,r.jsx)(n,{label:e.label,icon:e.icon},l))]})}var d=t(2115),c=t(7650);function u(e){let{onCreate:l,onClose:t}=e,[s,a]=(0,d.useState)("");(0,d.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]);let n=(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[90%] max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create New Folder"}),(0,r.jsx)("input",{type:"text",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Folder name",value:s,onChange:e=>a(e.target.value)}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 rounded bg-blue-200 hover:bg-blue-300 text-gray-800",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{s.trim()&&(l(s.trim()),t())},className:"px-4 py-2 rounded bg-blue-200 hover:bg-blue-300 text-gray-800",children:"Create"})]})]})});return c.createPortal(n,document.body)}function h(e){let{label:l,addFolder:t}=e,[s,a]=(0,d.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full flex pl-[1rem] pr-[1rem] relative items-center",children:[(0,r.jsxs)("label",{className:"w-full text-xl border-b border-gray-500",children:[l," Folders"]}),(0,r.jsx)("button",{onClick:()=>a(!0),children:(0,r.jsx)("span",{className:"material-symbols-outlined absolute right-4 bottom-0.5 cursor-pointer  text-gray-500 hover:text-black hover:scale-110 transition duration-200",children:"create_new_folder"})})]}),s&&(0,r.jsx)(u,{onCreate:e=>t(e),onClose:()=>a(!1)})]})}function x(e){let{isModalOpen:l,setIsModalOpen:t,label:s,shared:n,setShared:o,setSharedWith:i,sharedWith:u,folderAccount:h,ownerEmail:x}=e,[m,b]=(0,d.useState)(!1),[f,p]=(0,d.useState)([]),{account:g,shareFolderWithUser:v}=(0,a.C)();if((0,d.useEffect)(()=>{b(!0),p(u.filter(e=>e&&e!==g))},[u,g]),!l||!m)return null;function w(){let e=f.filter(e=>""!==e.trim()&&e!==g);i(e),e.forEach(async e=>{let l=await v(e,String(h));l.success||alert("Errore per ".concat(e,": ").concat(l.message))})}let j=[...f];for(;j.length<4;)j.push("");return c.createPortal((0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm flex justify-center items-center z-[9999] transition-opacity duration-300",onClick:()=>t(!1),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-lg mx-4 flex flex-col gap-6 relative transition-transform duration-300 scale-100",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-900 transition","aria-label":"Close modal",children:(0,r.jsx)("span",{className:"material-symbols-outlined select-none text-3xl",children:"close"})}),(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Shared with"}),j.map((e,l)=>(0,r.jsx)("input",{type:"text",placeholder:"email",value:e,onChange:e=>(function(e,l){let t=[...f];t[e]=l,p(t)})(l,e.target.value),onBlur:w,className:"w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-0 focus:border-gray-300 transition"},l)),x===g&&(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,r.jsx)("button",{onClick:()=>{t(!1)},className:"bg-blue-100 hover:bg-blue-200 text-black font-semibold px-6 py-2 rounded-lg transition duration-300 ease-in-out",children:"Confirm"}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"bg-blue-100 hover:bg-blue-200 text-black font-semibold px-6 py-2 rounded-lg transition duration-300 ease-in-out",children:"Cancel"})]})]})}),document.body)}var m=t(6141);function b(e){let{folderName:l,isShared:t,onConfirm:s,onCancel:a}=e,n=(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/30 backdrop-blur-sm flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[90%] max-w-md text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t?"Are you sure you want to unshare “".concat(l,"”?"):"Are you sure you want to share “".concat(l,"”?")}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:t?"Other users will no longer have access to this folder.":"Sharing this folder will make it visible to selected users."}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 rounded bg-blue-200 hover:bg-blue-300 text-gray-800",children:"Cancel"}),(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 rounded bg-blue-200 hover:bg-blue-300 text-gray-800",children:"Confirm"})]})]})});return c.createPortal(n,document.body)}function f(e){let{id:l,label:t,icon:s,shared:n,sharedWith:o,folderAccount:i,ownerEmail:c,editable:u,onLabelChange:h}=e,{selection:f,setSelection:p,deleteFolder:g,updateFolder:v,account:w,removeSharedFolderForUser:j}=(0,a.C)(),[y,N]=(0,d.useState)(!1),[C,k]=(0,d.useState)(!1),[E,S]=(0,d.useState)(!1),_=f===l;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{onClick:function(){p(l),window.dispatchEvent(new Event("hide-sidebar"))},className:"relative w-full flex items-center px-6 py-2 cursor-pointer transition-colors duration-200 ".concat(_?"bg-blue-200 text-white":"hover:bg-gray-100 text-gray-800"),children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-lg flex-shrink-0",children:s}),(0,r.jsxs)("div",{className:"pl-2 w-full pr-10 relative",children:[(0,r.jsx)("span",{className:"block truncate overflow-hidden whitespace-nowrap w-full",title:t,children:t}),(0,r.jsx)("div",{className:"absolute right-[-0.5rem] top-0",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-sm text-gray-400 hover:text-red-700 cursor-pointer",onClick:function(e){e.stopPropagation(),k(!0)},title:"Delete folder",children:"delete"})}),(0,r.jsxs)("div",{className:"absolute right-[1.2rem] top-0 flex items-center",children:[c===w&&(0,r.jsx)("span",{className:"material-symbols-outlined text-sm text-gray-400 cursor-pointer hover:text-green-700",onClick:function(e){e.stopPropagation(),S(!0)},title:n?"Unshare folder":"Share folder",children:"link"}),n&&(0,r.jsx)("span",{className:"material-symbols-outlined text-sm text-gray-400 cursor-pointer hover:text-blue-700 ml-2",onClick:function(e){e.stopPropagation(),N(!0)},title:"View shared users",children:"people"}),(0,r.jsx)(x,{sharedWith:o,setSharedWith:function(e){},setShared:e=>v(l,{shared:e}),isModalOpen:y,setIsModalOpen:N,label:t,shared:n,folderAccount:i,ownerEmail:c})]})]})]}),C&&(0,r.jsx)(m.A,{folderName:t,onConfirm:function(){c===w?g(l):j(l,w),k(!1)},onCancel:function(){k(!1)}}),E&&(0,r.jsx)(b,{folderName:t,isShared:n,onConfirm:function(){v(l,{shared:!n}),S(!1)},onCancel:function(){S(!1)}})]})}function p(e){let{label:l}=e,{folders:t,ID:s,updateFolder:n,postFolder:o,account:i}=(0,a.C)(),d=async e=>{await o(e,"Shared"===l)},c=t.filter(e=>{let t=!!e.shared;return console.log("Cartella: ".concat(e.label,", shared: ").concat(t)),"Shared"===l?t:!t});return(0,r.jsxs)("div",{className:"w-full text-l pt-[1rem]",children:[(0,r.jsx)(h,{label:l,addFolder:d}),c.map((e,l)=>(0,r.jsx)(f,{folderAccount:e.account,id:e.id,label:e.label,icon:e.shared?"folder_shared":"folder",shared:e.shared,sharedWith:e.sharedWith,editable:e.editable,onLabelChange:l=>n(e.id,{label:l}),ownerEmail:e.ownerEmail},l))]})}function g(){return(0,r.jsxs)("div",{className:"bg-blue-100 backdrop-blur-sm h-[100vh] w-full md:w-[25rem] flex flex-col shadow-xl border-r border-blue-200/50",children:[(0,r.jsx)("div",{className:"hidden md:block flex-none p-4 border-b border-blue-200/50",children:(0,r.jsx)(s.A,{})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,r.jsx)(i,{label:"Vault Navigation",buttons:[{label:"All Items",icon:"apps"},{label:"Password Health",icon:"ecg_heart"},{label:"Password Generator",icon:"lock_reset"},{label:"Settings",icon:"settings"}]}),(0,r.jsx)(p,{label:""}),(0,r.jsx)(p,{label:"Shared"})]})]})}function v(e){let{children:l}=e,[t,s]=(0,d.useState)("content");return(0,d.useEffect)(()=>{let e=()=>s("sidebar"),l=()=>s("content");return window.addEventListener("show-sidebar",e),window.addEventListener("hide-sidebar",l),()=>{window.removeEventListener("show-sidebar",e),window.removeEventListener("hide-sidebar",l)}},[]),(0,r.jsx)("div",{className:"h-[100dvh] w-[100dvw] overflow-hidden bg-white",children:(0,r.jsxs)(a.W,{children:[(0,r.jsxs)("div",{className:"hidden md:flex h-full w-full flex-row",children:[(0,r.jsx)(g,{}),(0,r.jsx)("div",{className:"h-full w-full",children:l})]}),(0,r.jsxs)("div",{className:"relative md:hidden h-full w-full overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 h-full w-full transition-transform duration-300 ease-in-out",style:{transform:"sidebar"===t?"translateX(0%)":"translateX(-100%)"},children:(0,r.jsx)(g,{})}),(0,r.jsx)("div",{className:"absolute top-0 left-0 h-full w-full transition-transform duration-300 ease-in-out",style:{transform:"content"===t?"translateX(0%)":"translateX(100%)"},children:l})]})]})})}},5663:()=>{},9820:(e,l,t)=>{Promise.resolve().then(t.bind(t,1728))}},e=>{var l=l=>e(e.s=l);e.O(0,[542,395,268,441,684,358],()=>l(9820)),_N_E=e.O()}]);